{"version":3,"file":"index.js","sources":["../node_modules/lodash/_root.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObject.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_getNative.js","../node_modules/lodash/_nativeCreate.js","../node_modules/lodash/_hashClear.js","../node_modules/lodash/_hashDelete.js","../node_modules/lodash/_hashGet.js","../node_modules/lodash/_hashHas.js","../node_modules/lodash/_hashSet.js","../node_modules/lodash/_Hash.js","../node_modules/lodash/_listCacheClear.js","../node_modules/lodash/eq.js","../node_modules/lodash/_assocIndexOf.js","../node_modules/lodash/_listCacheDelete.js","../node_modules/lodash/_listCacheGet.js","../node_modules/lodash/_listCacheHas.js","../node_modules/lodash/_listCacheSet.js","../node_modules/lodash/_ListCache.js","../node_modules/lodash/_Map.js","../node_modules/lodash/_mapCacheClear.js","../node_modules/lodash/_isKeyable.js","../node_modules/lodash/_getMapData.js","../node_modules/lodash/_mapCacheDelete.js","../node_modules/lodash/_mapCacheGet.js","../node_modules/lodash/_mapCacheHas.js","../node_modules/lodash/_mapCacheSet.js","../node_modules/lodash/_MapCache.js","../node_modules/lodash/_setCacheHas.js","../node_modules/lodash/_SetCache.js","../node_modules/lodash/_setCacheAdd.js","../node_modules/lodash/_strictIndexOf.js","../node_modules/lodash/_baseIndexOf.js","../node_modules/lodash/_baseFindIndex.js","../node_modules/lodash/_baseIsNaN.js","../node_modules/lodash/_arrayIncludes.js","../node_modules/lodash/_arrayIncludesWith.js","../node_modules/lodash/_cacheHas.js","../node_modules/lodash/_setToArray.js","../node_modules/lodash/_createSet.js","../node_modules/lodash/_Set.js","../node_modules/lodash/noop.js","../node_modules/lodash/_baseUniq.js","../node_modules/lodash/uniq.js","../lib/validate/helpers.ts","../lib/validate/index.ts","../lib/ui-registry.ts","../lib/helpers.ts","../lib/indie-delegate.ts","../lib/indie-registry.ts","../node_modules/lodash/now.js","../node_modules/lodash/_trimmedEndIndex.js","../node_modules/lodash/_baseTrim.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../lib/message-registry.ts","../lib/linter-registry.ts","../lib/editor-linter.ts","../lib/editor-registry.ts","../lib/commands.ts","../lib/toggle-view.ts","../lib/index.ts","../lib/main.ts"],"sourcesContent":["var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","export function showError(title: string, description: string, points: Array<string>) {\n  const renderedPoints = points.map(item => `  • ${item}`)\n  atom.notifications.addWarning(`[Linter] ${title}`, {\n    dismissable: true,\n    detail: `${description}\\n${renderedPoints.join('\\n')}`,\n  })\n}\n","import { Range, Point } from 'atom'\nimport { showError } from './helpers'\nimport type { UI, Linter, Message, Indie } from '../types'\n\nconst VALID_SEVERITY = new Set(['error', 'warning', 'info'])\n\nfunction validateUI(ui: UI): boolean {\n  const messages = []\n\n  if (ui && typeof ui === 'object') {\n    if (typeof ui.name !== 'string') {\n      messages.push('UI.name must be a string')\n    }\n    if (typeof ui.didBeginLinting !== 'function') {\n      messages.push('UI.didBeginLinting must be a function')\n    }\n    if (typeof ui.didFinishLinting !== 'function') {\n      messages.push('UI.didFinishLinting must be a function')\n    }\n    if (typeof ui.render !== 'function') {\n      messages.push('UI.render must be a function')\n    }\n    if (typeof ui.dispose !== 'function') {\n      messages.push('UI.dispose must be a function')\n    }\n  } else {\n    messages.push('UI must be an object')\n  }\n\n  if (messages.length) {\n    showError(\n      'Invalid UI received',\n      `These issues were encountered while registering the UI named '${ui && ui.name ? ui.name : 'Unknown'}'`,\n      messages,\n    )\n    return false\n  }\n\n  return true\n}\n\nfunction validateLinter(linter: Linter): boolean {\n  const messages = []\n\n  if (linter && typeof linter === 'object') {\n    if (typeof linter.name !== 'string') {\n      messages.push('Linter.name must be a string')\n    }\n    if (typeof linter.scope !== 'string' || (linter.scope !== 'file' && linter.scope !== 'project')) {\n      messages.push(\"Linter.scope must be either 'file' or 'project'\")\n    }\n    if (typeof linter.lintsOnChange !== 'boolean') {\n      messages.push('Linter.lintsOnChange must be a boolean')\n    }\n    if (!Array.isArray(linter.grammarScopes)) {\n      messages.push('Linter.grammarScopes must be an Array')\n    }\n    if (typeof linter.lint !== 'function') {\n      messages.push('Linter.lint must be a function')\n    }\n  } else {\n    messages.push('Linter must be an object')\n  }\n\n  if (messages.length) {\n    showError(\n      'Invalid Linter received',\n      `These issues were encountered while registering a Linter named '${linter && linter.name ? linter.name : 'Unknown'}'`,\n      messages,\n    )\n    return false\n  }\n\n  return true\n}\n\nfunction validateIndie(indie: Indie): boolean {\n  const messages = []\n\n  if (indie && typeof indie === 'object') {\n    if (typeof indie.name !== 'string') {\n      messages.push('Indie.name must be a string')\n    }\n  } else {\n    messages.push('Indie must be an object')\n  }\n\n  if (messages.length) {\n    showError(\n      'Invalid Indie received',\n      `These issues were encountered while registering an Indie Linter named '${\n        indie && indie.name ? indie.name : 'Unknown'\n      }'`,\n      messages,\n    )\n    return false\n  }\n\n  return true\n}\n\nfunction validateMessages(linterName: string, entries: Array<Message>): boolean {\n  const messages = []\n\n  if (Array.isArray(entries)) {\n    let invalidURL = false\n    let invalidIcon = false\n    let invalidExcerpt = false\n    let invalidLocation = false\n    let invalidSeverity = false\n    let invalidSolution = false\n    let invalidReference = false\n    let invalidDescription = false\n    let invalidLinterName = false\n\n    for (let i = 0, { length } = entries; i < length; ++i) {\n      const message = entries[i]\n      const { reference } = message\n      if (!invalidIcon && message.icon && typeof message.icon !== 'string') {\n        invalidIcon = true\n        messages.push('Message.icon must be a string')\n      }\n      if (\n        !invalidLocation &&\n        (!message.location ||\n          typeof message.location !== 'object' ||\n          typeof message.location.file !== 'string' ||\n          typeof message.location.position !== 'object' ||\n          !message.location.position)\n      ) {\n        invalidLocation = true\n        messages.push('Message.location must be valid')\n      } else if (!invalidLocation) {\n        const range = Range.fromObject(message.location.position)\n        if (\n          Number.isNaN(range.start.row) ||\n          Number.isNaN(range.start.column) ||\n          Number.isNaN(range.end.row) ||\n          Number.isNaN(range.end.column)\n        ) {\n          invalidLocation = true\n          messages.push('Message.location.position should not contain NaN coordinates')\n        }\n      }\n      if (\n        !invalidSolution &&\n        message.solutions &&\n        !Array.isArray(message.solutions) &&\n        !(message.solutions instanceof Promise)\n      ) {\n        invalidSolution = true\n        messages.push('Message.solutions must be valid')\n      }\n      if (\n        !invalidReference &&\n        reference &&\n        (typeof reference !== 'object' ||\n          typeof reference.file !== 'string' ||\n          typeof reference.position !== 'object' ||\n          !reference.position)\n      ) {\n        invalidReference = true\n        messages.push('Message.reference must be valid')\n      } else if (!invalidReference && reference && reference.position !== undefined) {\n        const position = Point.fromObject(reference.position)\n        if (Number.isNaN(position.row) || Number.isNaN(position.column)) {\n          invalidReference = true\n          messages.push('Message.reference.position should not contain NaN coordinates')\n        }\n      }\n      if (!invalidExcerpt && typeof message.excerpt !== 'string') {\n        invalidExcerpt = true\n        messages.push('Message.excerpt must be a string')\n      }\n      if (!invalidSeverity && !VALID_SEVERITY.has(message.severity)) {\n        invalidSeverity = true\n        messages.push(\"Message.severity must be 'error', 'warning' or 'info'\")\n      }\n      if (!invalidURL && message.url && typeof message.url !== 'string') {\n        invalidURL = true\n        messages.push('Message.url must be a string')\n      }\n      if (\n        !invalidDescription &&\n        message.description &&\n        typeof message.description !== 'function' &&\n        typeof message.description !== 'string'\n      ) {\n        invalidDescription = true\n        messages.push('Message.description must be a function or string')\n      }\n      if (!invalidLinterName && message.linterName && typeof message.linterName !== 'string') {\n        invalidLinterName = true\n        messages.push('Message.linterName must be a string')\n      }\n    }\n  } else {\n    messages.push('Linter Result must be an Array')\n  }\n\n  if (messages.length) {\n    showError(\n      'Invalid Linter Result received',\n      `These issues were encountered while processing messages from a linter named '${linterName}'`,\n      messages,\n    )\n    return false\n  }\n\n  return true\n}\n\nexport { validateUI as ui, validateLinter as linter, validateIndie as indie, validateMessages as messages }\n","import { CompositeDisposable } from 'atom'\nimport { ui as validateUI } from './validate'\nimport type { Linter, UI, MessagesPatch } from './types'\n\nexport default class UIRegistry {\n  private providers: Set<UI> = new Set()\n  private subscriptions: CompositeDisposable = new CompositeDisposable()\n\n  add(ui: UI) {\n    if (!this.providers.has(ui) && validateUI(ui)) {\n      this.subscriptions.add(ui)\n      this.providers.add(ui)\n    }\n  }\n  delete(provider: UI) {\n    if (this.providers.has(provider)) {\n      provider.dispose()\n      this.providers.delete(provider)\n    }\n  }\n  getProviders(): Array<UI> {\n    return Array.from(this.providers)\n  }\n  render(messages: MessagesPatch) {\n    this.providers.forEach(function (provider) {\n      provider.render(messages)\n    })\n  }\n  didBeginLinting(linter: Linter, filePath: string) {\n    this.providers.forEach(function (provider) {\n      provider.didBeginLinting(linter, filePath)\n    })\n  }\n  didFinishLinting(linter: Linter, filePath: string) {\n    this.providers.forEach(function (provider) {\n      provider.didFinishLinting(linter, filePath)\n    })\n  }\n  dispose() {\n    this.providers.clear()\n    this.subscriptions.dispose()\n  }\n}\n","import arrayUnique from 'lodash/uniq'\nimport { Directory, Range, Point, PointCompatible, RangeCompatible } from 'atom'\nimport type { TextEditor } from 'atom'\nimport type { Linter, Message, MessageSolution, MessageLike, MessageSolutionLike } from './types'\n\nexport const $version = '__$sb_linter_version'\nexport const $activated = '__$sb_linter_activated'\nexport const $requestLatest = '__$sb_linter_request_latest'\nexport const $requestLastReceived = '__$sb_linter_request_last_received'\n\nexport function shouldTriggerLinter(linter: Linter, wasTriggeredOnChange: boolean, scopes: Array<string>): boolean {\n  if (wasTriggeredOnChange && !linter.lintsOnChange) {\n    return false\n  }\n  return scopes.some(function (scope) {\n    return linter.grammarScopes.includes(scope)\n  })\n}\n\nexport function getEditorCursorScopes(textEditor: TextEditor): Array<string> {\n  return arrayUnique(\n    textEditor.getCursors().reduce((scopes, cursor) => scopes.concat(cursor.getScopeDescriptor().getScopesArray()), ['*']),\n  )\n}\n\nlet minimatch: typeof import('minimatch')\nexport async function isPathIgnored(\n  filePath: string | null | undefined,\n  ignoredGlob: string,\n  ignoredVCS: boolean,\n): Promise<boolean> {\n  if (!filePath) {\n    return true\n  }\n\n  if (ignoredVCS) {\n    const directory = new Directory(filePath)\n    const repository = await atom.project.repositoryForDirectory(directory)\n    if (repository && repository.isPathIgnored(filePath)) {\n      return true\n    }\n  }\n  const normalizedFilePath = process.platform === 'win32' ? filePath.replace(/\\\\/g, '/') : filePath\n  if (!minimatch) {\n    minimatch = require('minimatch')\n  }\n  return minimatch(normalizedFilePath, ignoredGlob)\n}\n\nexport function updateMessageKey(message: Message) {\n  const { reference, location } = message\n  message.key = [\n    `$LINTER:${message.linterName}`,\n    `$LOCATION:${location.file}$${location.position.start.row}$${location.position.start.column}$${location.position.end.row}$${location.position.end.column}`,\n    reference\n      ? `$REFERENCE:${reference.file}$${reference.position ? `${reference.position.row}$${reference.position.column}` : ''}`\n      : '$REFERENCE:null',\n    `$EXCERPT:${message.excerpt}`,\n    `$SEVERITY:${message.severity}`,\n    message.icon ? `$ICON:${message.icon}` : '$ICON:null',\n    message.url ? `$URL:${message.url}` : '$URL:null',\n    typeof message.description === 'string' ? `$DESCRIPTION:${message.description}` : '$DESCRIPTION:null',\n  ].join('')\n}\n\nexport function normalizeMessages(linterName: string, messages: Array<Message | MessageLike>) {\n  for (let i = 0, { length } = messages; i < length; ++i) {\n    const message = messages[i]\n    const { reference, solutions } = message\n    // convert RangeCompatible to Range and PointCompatible to Point\n    // NOTE (this is not covered in the types, but done for backward compatibility)\n    message.location.position = getRangeClass(message.location.position)\n    if (reference !== undefined && reference.position !== undefined) {\n      reference.position = getPointClass(reference.position)\n    }\n    if (Array.isArray(solutions)) {\n      // NOTE if solutions is a {Promise<MessageSolutionLike[]>} of an array, we don't normalize them!\n      for (let j = 0, _length = solutions.length; j < _length; j++) {\n        const solution: MessageSolution | MessageSolutionLike = solutions[j]\n        solution.position = getRangeClass(solution.position)\n      }\n    }\n    message.version = 2\n    if (!message.linterName) {\n      message.linterName = linterName\n    }\n    // now the message is a {Message}\n    updateMessageKey(message as Message)\n  }\n}\n\n/* convert RangeCompatible to Range */\nfunction getPointClass(point: Point | PointCompatible): Point {\n  if (!(point instanceof Point)) {\n    return Point.fromObject(point)\n  }\n  return point\n}\n\n/* convert RangeCompatible to Range */\nfunction getRangeClass(range: Range | RangeCompatible): Range {\n  if (!(range instanceof Range)) {\n    return Range.fromObject(range)\n  }\n  return range\n}\n\n// update the key of the given messages\nexport function updateKeys(messages: Array<Message>) {\n  messages.forEach(m => {\n    updateMessageKey(m)\n  })\n}\n\n// create a map from keys to messages\nexport function createKeyMessageMap(messages: Array<Message>): Map<string, Message> {\n  const keyMessageMap = new Map()\n  for (let i = 0, { length } = messages; i < length; ++i) {\n    const message = messages[i]\n    keyMessageMap.set(message.key, message)\n  }\n  return keyMessageMap\n}\n\ninterface FlaggedMessages {\n  oldKept: Array<Message>\n  oldRemoved: Array<Message>\n  newAdded: Array<Message>\n}\n\n// This fast function returns the new messages and old messages by comparing their key against the cache.\n// This prevents re-rendering the already rendered messages\nexport function flagMessages(inputs: Array<Message>, oldMessages: Array<Message>): FlaggedMessages | null {\n  // inputs check\n  if (inputs === undefined || oldMessages === undefined) {\n    return null\n  }\n\n  // All the messages of the linter are new, no need to diff\n  // tag the messages for adding and save them to linter's cache\n  if (!oldMessages.length) {\n    // NOTE: No need to add .key here because normalizeMessages already does that\n    return { oldKept: [], oldRemoved: [], newAdded: inputs }\n  }\n\n  // The linter has no messages anymore\n  // tag all of its messages from cache for removal and empty the cache\n  if (!inputs.length) {\n    return { oldKept: [], oldRemoved: oldMessages, newAdded: [] }\n  }\n\n  // In all the other situations:\n  // perform diff checking between the linter's new messages and its cache\n\n  // create a map from keys to oldMessages\n  const cache = createKeyMessageMap(oldMessages)\n\n  // Find old kept and new added\n  const newAdded: Set<Message> = new Set()\n  const oldKept: Map<string, Message> = new Map()\n  for (let iInput = 0, len = inputs.length; iInput < len; iInput++) {\n    const input = inputs[iInput]\n    if (cache.has(input.key)) {\n      oldKept.set(input.key, input)\n    } else {\n      newAdded.add(input)\n    }\n  }\n\n  // Find old removed\n  const cacheKeys = Array.from(cache.keys())\n  const oldKeptKeys = Array.from(oldKept.keys())\n\n  const oldRemovedKeys = cacheKeys.filter(x => !oldKeptKeys.includes(x))\n\n  const oldRemoved: Set<Message> = new Set()\n  for (let iRemoved = 0, RemovedKeysLen = oldRemovedKeys.length; iRemoved < RemovedKeysLen; iRemoved++) {\n    // cache is created from oldMessages and oldRemovedKeys is a subset of oldMessages. So this will not be undefined\n    oldRemoved.add(cache.get(oldRemovedKeys[iRemoved]) as Message)\n  }\n\n  return {\n    oldKept: Array.from(oldKept.values()),\n    oldRemoved: [...oldRemoved],\n    newAdded: [...newAdded],\n  }\n}\n\n// fast mergeArray function\n// https://uilicious.com/blog/javascript-array-push-is-945x-faster-than-array-concat/\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nexport function mergeArray(arr1: Array<any>, arr2: Array<any>) {\n  if (!arr2.length) {\n    return\n  }\n  Array.prototype.push.apply(arr1, arr2)\n}\n","import { Emitter, CompositeDisposable } from 'atom'\nimport type { Disposable } from 'atom'\n\nimport * as Validate from './validate'\nimport { normalizeMessages, mergeArray } from './helpers'\nimport type { Indie, Message } from './types'\n\nexport default class IndieDelegate {\n  private indie: Indie\n  scope: 'project' = 'project'\n  private emitter: Emitter = new Emitter()\n  version: 2\n  private messages: Map<string | null | undefined, Array<Message>> = new Map()\n  private subscriptions: CompositeDisposable = new CompositeDisposable()\n\n  constructor(indie: Indie, version: 2) {\n    this.indie = indie\n    this.version = version\n    this.subscriptions.add(this.emitter)\n  }\n  get name(): string {\n    return this.indie.name\n  }\n  getMessages(): Array<Message> {\n    const out: Array<Message> = []\n    this.messages.forEach(m => {\n      mergeArray(out, m)\n    })\n    return out\n  }\n  clearMessages(): void {\n    if (!this.subscriptions.disposed) {\n      this.emitter.emit('did-update', [])\n      this.messages.clear()\n    }\n  }\n  setMessages(filePath: string | Array<Record<string, any>>, messages: Array<Message> | null | undefined = null): void {\n    // v2 Support from here on\n    if (typeof filePath !== 'string' || !Array.isArray(messages)) {\n      throw new Error('Invalid Parameters to setMessages()')\n    }\n    if (this.subscriptions.disposed || !Validate.messages(this.name, messages)) {\n      return\n    }\n    messages.forEach(function (message) {\n      if (message.location.file !== filePath) {\n        console.debug('[Linter-UI-Default] Expected File', filePath, 'Message', message)\n        throw new Error('message.location.file does not match the given filePath')\n      }\n    })\n\n    normalizeMessages(this.name, messages)\n    this.messages.set(filePath, messages)\n    this.emitter.emit('did-update', this.getMessages())\n  }\n  setAllMessages(messages: Array<Message>): void {\n    if (this.subscriptions.disposed) {\n      return\n    }\n\n    if (!Array.isArray(messages) || atom.inDevMode()) {\n      if (!Validate.messages(this.name, messages)) {\n        return\n      }\n    }\n    normalizeMessages(this.name, messages)\n\n    this.messages.clear()\n    for (let i = 0, { length } = messages; i < length; ++i) {\n      const message: Message = messages[i]\n      const filePath = message.location.file\n      let fileMessages = this.messages.get(filePath)\n      if (!fileMessages) {\n        this.messages.set(filePath, (fileMessages = []))\n      }\n      fileMessages.push(message)\n    }\n    this.emitter.emit('did-update', this.getMessages())\n  }\n\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  onDidUpdate(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('did-update', callback)\n  }\n  onDidDestroy(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('did-destroy', callback)\n  }\n  /* eslint-enable @typescript-eslint/no-explicit-any */\n\n  dispose(): void {\n    this.emitter.emit('did-destroy')\n    this.subscriptions.dispose()\n    this.messages.clear()\n  }\n}\n","import { Emitter, CompositeDisposable } from 'atom'\nimport type { Disposable } from 'atom'\n\nimport IndieDelegate from './indie-delegate'\nimport { indie as validateIndie } from './validate'\nimport type { Indie } from './types'\n\nexport default class IndieRegistry {\n  private emitter: Emitter = new Emitter()\n  private delegates: Set<IndieDelegate> = new Set()\n  private subscriptions: CompositeDisposable = new CompositeDisposable()\n\n  constructor() {\n    this.subscriptions.add(this.emitter)\n  }\n  // Public method\n  register(config: Indie, version: 2): IndieDelegate {\n    if (!validateIndie(config)) {\n      throw new Error('Error registering Indie Linter')\n    }\n    const indieLinter = new IndieDelegate(config, version)\n    this.delegates.add(indieLinter)\n    indieLinter.onDidDestroy(() => {\n      this.delegates.delete(indieLinter)\n    })\n    indieLinter.onDidUpdate(messages => {\n      this.emitter.emit('did-update', { linter: indieLinter, messages })\n    })\n    this.emitter.emit('observe', indieLinter)\n\n    return indieLinter\n  }\n  getProviders(): Array<IndieDelegate> {\n    return Array.from(this.delegates)\n  }\n\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  observe(callback: (...args: Array<any>) => any): Disposable {\n    this.delegates.forEach(callback)\n    return this.emitter.on('observe', callback)\n  }\n  onDidUpdate(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('did-update', callback)\n  }\n  /* eslint-enable @typescript-eslint/no-explicit-any */\n\n  dispose() {\n    for (const entry of this.delegates) {\n      entry.dispose()\n    }\n    this.subscriptions.dispose()\n  }\n}\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import { CompositeDisposable, Emitter } from 'atom'\nimport debounce from 'lodash/debounce'\nimport type { Disposable, TextBuffer } from 'atom'\nimport { flagMessages, mergeArray } from './helpers'\nimport type { MessagesPatch, Message, Linter } from './types'\n\ntype Linter$Message$Map = {\n  buffer: TextBuffer | null | undefined\n  linter: Linter\n  changed: boolean\n  deleted: boolean\n  messages: Array<Message>\n  oldMessages: Array<Message>\n}\n\nexport default class MessageRegistry {\n  private emitter: Emitter = new Emitter()\n  messages: Array<Message> = []\n  private messagesMap: Set<Linter$Message$Map> = new Set()\n  private subscriptions: CompositeDisposable = new CompositeDisposable()\n  private debouncedUpdate: () => void\n\n  constructor() {\n    this.debouncedUpdate = debounce(this.update, 100, { leading: true })\n    this.subscriptions.add(this.emitter)\n  }\n  set({ messages, linter, buffer }: { messages: Array<Message>; linter: Linter; buffer: TextBuffer | null }) {\n    // check if the linter has been already set\n    let found = null\n    for (const entry of this.messagesMap) {\n      if (entry.buffer === buffer && entry.linter === linter) {\n        found = entry\n        break\n      }\n    }\n\n    if (found) {\n      // found linter\n      found.messages = messages\n      found.changed = true\n    } else {\n      // new linter\n      this.messagesMap.add({ messages, linter, buffer, oldMessages: [], changed: true, deleted: false })\n    }\n    this.debouncedUpdate()\n  }\n  update() {\n    // the final object sent to UI that contains the messages tagged for adding/removeal. messages is all the kept + added messages\n    const result: { added: Array<Message>; removed: Array<Message>; messages: Array<Message> } = {\n      added: [],\n      removed: [],\n      messages: [],\n    }\n\n    // looping over each linter\n    for (const entry of this.messagesMap) {\n      // if linter is deleted\n      // tag the linter's cache for removal and delete it from the map\n      if (entry.deleted) {\n        mergeArray(result.removed, entry.oldMessages)\n        this.messagesMap.delete(entry)\n        continue\n      }\n\n      // if the linter is not changed\n      // just use its cache (no added/removed and everything is kept) and skip the rest\n      if (!entry.changed) {\n        // TODO When this code acutally runs?!\n        mergeArray(result.messages, entry.oldMessages)\n        continue\n      }\n\n      // flag messages as oldKept, oldRemoved, newAdded\n      const flaggedMessages = flagMessages(entry.messages, entry.oldMessages)\n\n      // update the result and cache\n      if (flaggedMessages !== null) {\n        const { oldKept, oldRemoved, newAdded } = flaggedMessages\n        mergeArray(result.added, newAdded)\n        mergeArray(result.removed, oldRemoved)\n        const allThisEntry = newAdded.concat(oldKept)\n        mergeArray(result.messages, allThisEntry)\n        entry.oldMessages = allThisEntry // update chache\n      }\n    }\n\n    // if any messages is removed or added, then update the UI\n    if (result.added.length || result.removed.length) {\n      this.messages = result.messages\n      this.emitter.emit('did-update-messages', result)\n    }\n  }\n  onDidUpdateMessages(callback: (difference: MessagesPatch) => void): Disposable {\n    return this.emitter.on('did-update-messages', callback)\n  }\n  deleteByBuffer(buffer: TextBuffer) {\n    for (const entry of this.messagesMap) {\n      if (entry.buffer === buffer) {\n        entry.deleted = true\n      }\n    }\n    this.debouncedUpdate()\n  }\n  deleteByLinter(linter: Linter) {\n    for (const entry of this.messagesMap) {\n      if (entry.linter === linter) {\n        entry.deleted = true\n      }\n    }\n    this.debouncedUpdate()\n  }\n  dispose() {\n    this.subscriptions.dispose()\n  }\n}\n","import { Emitter, CompositeDisposable } from 'atom'\nimport type { TextEditor, Disposable, Notification } from 'atom'\n\nimport * as Helpers from './helpers'\nimport * as Validate from './validate'\nimport { $version, $activated, $requestLatest, $requestLastReceived } from './helpers'\nimport type { Linter } from './types'\n\nexport default class LinterRegistry {\n  private emitter: Emitter = new Emitter()\n  private linters: Set<Linter> = new Set()\n  private lintOnChange: boolean = true\n  private ignoreVCS: boolean = true\n  private ignoreGlob: string = '**/*.min.{js,css}'\n  private lintPreviewTabs: boolean = true\n  private subscriptions: CompositeDisposable = new CompositeDisposable()\n  private disabledProviders: Array<string> = []\n  private activeNotifications: Set<Notification> = new Set()\n\n  constructor() {\n    this.subscriptions.add(\n      this.emitter,\n      atom.config.observe('linter.lintOnChange', lintOnChange => {\n        this.lintOnChange = lintOnChange\n      }),\n      atom.config.observe('core.excludeVcsIgnoredPaths', ignoreVCS => {\n        this.ignoreVCS = ignoreVCS\n      }),\n      atom.config.observe('linter.ignoreGlob', ignoreGlob => {\n        this.ignoreGlob = ignoreGlob\n      }),\n      atom.config.observe('linter.lintPreviewTabs', lintPreviewTabs => {\n        this.lintPreviewTabs = lintPreviewTabs\n      }),\n      atom.config.observe('linter.disabledProviders', disabledProviders => {\n        if (disabledProviders.length !== 0) {\n          console.warn(`Linter package: disabled linter providers: ${disabledProviders}`)\n        }\n        this.disabledProviders = disabledProviders\n      }),\n    )\n  }\n  hasLinter(linter: Linter): boolean {\n    return this.linters.has(linter)\n  }\n  addLinter(linter: Linter) {\n    if (!Validate.linter(linter)) {\n      return\n    }\n    linter[$activated] = true\n    if (typeof linter[$requestLatest] === 'undefined') {\n      linter[$requestLatest] = 0\n    }\n    if (typeof linter[$requestLastReceived] === 'undefined') {\n      linter[$requestLastReceived] = 0\n    }\n    linter[$version] = 2\n    this.linters.add(linter)\n  }\n  getProviders(): Array<Linter> {\n    return Array.from(this.linters)\n  }\n  deleteLinter(linter: Linter) {\n    if (!this.linters.has(linter)) {\n      return\n    }\n    linter[$activated] = false\n    this.linters.delete(linter)\n  }\n  async lint({ onChange, editor }: { onChange: boolean; editor: TextEditor }): Promise<boolean> {\n    const filePath = editor.getPath()\n\n    if (\n      (onChange && !this.lintOnChange) || // Lint-on-change mismatch\n      // Ignored by VCS, Glob, or simply not saved anywhere yet\n      (!this.lintPreviewTabs && atom.workspace.getActivePane().getPendingItem() === editor) || // Ignore Preview tabs\n      (await Helpers.isPathIgnored(editor.getPath(), this.ignoreGlob, this.ignoreVCS))\n    ) {\n      return false\n    }\n\n    const scopes = Helpers.getEditorCursorScopes(editor)\n\n    const promises = []\n    for (const linter of this.linters) {\n      if (!Helpers.shouldTriggerLinter(linter, onChange, scopes)) {\n        continue\n      }\n      if (this.disabledProviders.includes(linter.name)) {\n        continue\n      }\n      const number = ++linter[$requestLatest]\n      const statusBuffer = linter.scope === 'file' ? editor.getBuffer() : null\n      const statusFilePath = linter.scope === 'file' ? filePath : null\n\n      this.emitter.emit('did-begin-linting', { number, linter, filePath: statusFilePath })\n      promises.push(\n        new Promise(function (resolve: (editor: ReturnType<Linter['lint']>) => void) {\n          resolve(linter.lint(editor))\n        }).then(\n          messages => {\n            this.emitter.emit('did-finish-linting', { number, linter, filePath: statusFilePath })\n            if (linter[$requestLastReceived] >= number || !linter[$activated] || (statusBuffer && !statusBuffer.isAlive())) {\n              return\n            }\n            linter[$requestLastReceived] = number\n            if (statusBuffer && !statusBuffer.isAlive()) {\n              return\n            }\n\n            if (messages === null || messages === undefined) {\n              // NOTE: Do NOT update the messages when providers return null\n              return\n            }\n\n            let validity = true\n            // NOTE: We are calling it when results are not an array to show a nice notification\n            if (atom.inDevMode() || !Array.isArray(messages)) {\n              validity = Validate.messages(linter.name, messages)\n            }\n            if (!validity) {\n              return\n            }\n\n            Helpers.normalizeMessages(linter.name, messages)\n            this.emitter.emit('did-update-messages', { messages, linter, buffer: statusBuffer })\n          },\n          error => {\n            this.emitter.emit('did-finish-linting', { number, linter, filePath: statusFilePath })\n\n            console.error(`[Linter] Error running ${linter.name}`, error)\n            const notificationMessage = `[Linter] Error running ${linter.name}`\n            if (Array.from(this.activeNotifications).some(item => item.getOptions().detail === notificationMessage)) {\n              // This message is still showing to the user!\n              return\n            }\n\n            const notification = atom.notifications.addError(notificationMessage, {\n              detail: 'See Console for more info.',\n              dismissable: true,\n              buttons: [\n                {\n                  text: 'Open Console',\n                  onDidClick: () => {\n                    atom.openDevTools()\n                    notification.dismiss()\n                  },\n                },\n                {\n                  text: 'Cancel',\n                  onDidClick: () => {\n                    notification.dismiss()\n                  },\n                },\n              ],\n            })\n          },\n        ),\n      )\n    }\n\n    await Promise.all(promises)\n    return true\n  }\n\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  onDidUpdateMessages(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('did-update-messages', callback)\n  }\n  onDidBeginLinting(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('did-begin-linting', callback)\n  }\n  onDidFinishLinting(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('did-finish-linting', callback)\n  }\n  /* eslint-enable @typescript-eslint/no-explicit-any */\n\n  dispose() {\n    this.activeNotifications.forEach(notification => notification.dismiss())\n    this.activeNotifications.clear()\n    this.linters.clear()\n    this.subscriptions.dispose()\n  }\n}\n","import { Emitter, CompositeDisposable, Disposable } from 'atom'\nimport debounce from 'lodash/debounce'\nimport type { TextEditor } from 'atom'\n\nexport default class EditorLinter {\n  private editor: TextEditor\n  private emitter: Emitter = new Emitter()\n  private subscriptions: CompositeDisposable = new CompositeDisposable()\n\n  constructor(editor: TextEditor) {\n    if (!atom.workspace.isTextEditor(editor)) {\n      throw new Error('EditorLinter expects a valid TextEditor')\n    }\n    const editorBuffer = editor.getBuffer()\n    const debouncedLint = debounce(\n      () => {\n        this.emitter.emit('should-lint', false)\n      },\n      50,\n      { leading: true },\n    )\n\n    this.editor = editor\n\n    this.subscriptions.add(\n      this.editor.onDidDestroy(() => this.dispose()),\n\n      // This debouncing is for beautifiers, if they change contents of the editor and save\n      // Linter should count that group of events as one.\n      this.editor.onDidSave(debouncedLint),\n\n      // This is to relint in case of external changes to the opened file\n      editorBuffer.onDidReload(debouncedLint),\n\n      // NOTE: TextEditor::onDidChange immediately invokes the callback if the text editor was *just* created\n      // Using TextBuffer::onDidChange doesn't have the same behavior so using it instead.\n      this.subscriptiveObserve(atom.config, 'linter.lintOnChangeInterval', interval =>\n        editorBuffer.onDidChange(\n          debounce(() => {\n            this.emitter.emit('should-lint', true)\n          }, interval),\n        ),\n      ),\n    )\n  }\n  getEditor(): TextEditor {\n    return this.editor\n  }\n  lint(onChange: boolean = false) {\n    this.emitter.emit('should-lint', onChange)\n  }\n\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  onShouldLint(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('should-lint', callback)\n  }\n  onDidDestroy(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('did-destroy', callback)\n  }\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n\n  dispose() {\n    this.emitter.emit('did-destroy')\n    this.subscriptions.dispose()\n    this.emitter.dispose()\n  }\n\n  subscriptiveObserve(object: Record<string, any>, eventName: string, callback: (...args: Array<any>) => any): Disposable {\n    let subscription: Disposable | null = null\n    const eventSubscription = object.observe(eventName, (props: Record<string, any>) => {\n      if (subscription) {\n        subscription.dispose()\n      }\n      subscription = callback.call(this, props)\n    })\n\n    return new Disposable(function () {\n      eventSubscription.dispose()\n      if (subscription) {\n        subscription.dispose()\n      }\n    })\n  }\n}\n","import { Emitter, CompositeDisposable } from 'atom'\nimport type { Disposable, TextEditor } from 'atom'\nimport EditorLinter from './editor-linter'\n\nexport default class EditorRegistry {\n  private emitter: Emitter = new Emitter()\n  private lintOnOpen: boolean = true\n  private subscriptions: CompositeDisposable = new CompositeDisposable()\n  private editorLinters: Map<TextEditor, EditorLinter> = new Map()\n\n  constructor() {\n    this.subscriptions.add(\n      this.emitter,\n      atom.config.observe('linter.lintOnOpen', lintOnOpen => {\n        this.lintOnOpen = lintOnOpen\n      }),\n    )\n  }\n  activate() {\n    this.subscriptions.add(\n      atom.workspace.observeTextEditors(textEditor => {\n        this.createFromTextEditor(textEditor)\n      }),\n    )\n  }\n  get(textEditor: TextEditor): EditorLinter | null | undefined {\n    return this.editorLinters.get(textEditor)\n  }\n  createFromTextEditor(textEditor: TextEditor): EditorLinter {\n    let editorLinter = this.editorLinters.get(textEditor)\n    if (editorLinter) {\n      return editorLinter\n    }\n    editorLinter = new EditorLinter(textEditor)\n    editorLinter.onDidDestroy(() => {\n      this.editorLinters.delete(textEditor)\n    })\n    this.editorLinters.set(textEditor, editorLinter)\n    this.emitter.emit('observe', editorLinter)\n    if (this.lintOnOpen) {\n      editorLinter.lint()\n    }\n    return editorLinter\n  }\n  hasSibling(editorLinter: EditorLinter): boolean {\n    const buffer = editorLinter.getEditor().getBuffer()\n\n    return Array.from(this.editorLinters.keys()).some(item => item.getBuffer() === buffer)\n  }\n  observe(callback: (editorLinter: EditorLinter) => void): Disposable {\n    this.editorLinters.forEach(callback)\n    return this.emitter.on('observe', callback)\n  }\n  dispose() {\n    for (const entry of this.editorLinters.values()) {\n      entry.dispose()\n    }\n    this.subscriptions.dispose()\n  }\n}\n","import { CompositeDisposable, Emitter } from 'atom'\nimport type { Disposable } from 'atom'\n\nimport * as Helpers from './helpers'\nimport type { Linter, UI } from './types'\nimport type IndieDelegate from './indie-delegate'\n\nlet manifest: { version: number }\n\nfunction formatItem(item: { name: string } | string) {\n  let itemName: string\n  if (item && typeof item === 'object' && typeof item.name === 'string') {\n    itemName = item.name\n  } else if (typeof item === 'string') {\n    itemName = item\n  } else {\n    throw new Error('Unknown object passed to formatItem()')\n  }\n  return `  - ${itemName}`\n}\nfunction sortByName(item1: { name: string }, item2: { name: string }) {\n  return item1.name.localeCompare(item2.name)\n}\n\nexport class Commands {\n  private emitter: Emitter = new Emitter()\n  private subscriptions: CompositeDisposable = new CompositeDisposable()\n\n  constructor() {\n    this.subscriptions.add(\n      this.emitter,\n      atom.commands.add('atom-workspace', {\n        'linter:enable-linter': () => this.enableLinter(),\n        'linter:disable-linter': () => this.disableLinter(),\n      }),\n      atom.commands.add('atom-text-editor:not([mini])', {\n        'linter:lint': () => this.lint(),\n        'linter:debug': () => this.debug(),\n        'linter:toggle-active-editor': () => this.toggleActiveEditor(),\n      }),\n    )\n  }\n  lint() {\n    this.emitter.emit('should-lint')\n  }\n  debug() {\n    this.emitter.emit('should-debug')\n  }\n  enableLinter() {\n    this.emitter.emit('should-toggle-linter', 'enable')\n  }\n  disableLinter() {\n    this.emitter.emit('should-toggle-linter', 'disable')\n  }\n  toggleActiveEditor() {\n    this.emitter.emit('should-toggle-active-editor')\n  }\n\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  onShouldLint(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('should-lint', callback)\n  }\n  onShouldDebug(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('should-debug', callback)\n  }\n  onShouldToggleActiveEditor(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('should-toggle-active-editor', callback)\n  }\n  onShouldToggleLinter(callback: (...args: Array<any>) => any): Disposable {\n    return this.emitter.on('should-toggle-linter', callback)\n  }\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n\n  dispose() {\n    this.subscriptions.dispose()\n  }\n}\n\nexport async function showDebug(standardLinters: Array<Linter>, indieLinters: Array<IndieDelegate>, uiProviders: Array<UI>) {\n  if (!manifest) {\n    manifest = require('../package.json')\n  }\n\n  const textEditor = atom.workspace.getActiveTextEditor()\n  if (textEditor === undefined) {\n    return\n  }\n  const textEditorScopes = Helpers.getEditorCursorScopes(textEditor)\n  const sortedLinters = standardLinters.slice().sort(sortByName)\n  const sortedIndieLinters = indieLinters.slice().sort(sortByName)\n  const sortedUIProviders = uiProviders.slice().sort(sortByName)\n\n  const indieLinterNames = sortedIndieLinters.map(formatItem).join('\\n')\n  const standardLinterNames = sortedLinters.map(formatItem).join('\\n')\n  const matchingStandardLinters = sortedLinters\n    .filter(linter => Helpers.shouldTriggerLinter(linter, false, textEditorScopes))\n    .map(formatItem)\n    .join('\\n')\n  const humanizedScopes = textEditorScopes.map(formatItem).join('\\n')\n  const uiProviderNames = sortedUIProviders.map(formatItem).join('\\n')\n\n  const ignoreGlob = atom.config.get('linter.ignoreGlob')\n  const ignoreVCSIgnoredPaths = atom.config.get('core.excludeVcsIgnoredPaths')\n  const disabledLinters = atom.config.get('linter.disabledProviders').map(formatItem).join('\\n')\n  const filePathIgnored = await Helpers.isPathIgnored(textEditor.getPath(), ignoreGlob, ignoreVCSIgnoredPaths)\n\n  atom.notifications.addInfo('Linter Debug Info', {\n    detail: [\n      `Platform: ${process.platform}`,\n      `Atom Version: ${atom.getVersion()}`,\n      `Linter Version: ${manifest.version}`,\n      `Opened file is ignored: ${filePathIgnored ? 'Yes' : 'No'}`,\n      `Matching Linter Providers: \\n${matchingStandardLinters}`,\n      `Disabled Linter Providers: \\n${disabledLinters}`,\n      `Standard Linter Providers: \\n${standardLinterNames}`,\n      `Indie Linter Providers: \\n${indieLinterNames}`,\n      `UI Providers: \\n${uiProviderNames}`,\n      `Ignore Glob: ${ignoreGlob}`,\n      `VCS Ignored Paths are excluded: ${ignoreVCSIgnoredPaths}`,\n      `Current File Scopes: \\n${humanizedScopes}`,\n    ].join('\\n'),\n    dismissable: true,\n  })\n}\n","import { CompositeDisposable, Emitter, Disposable } from 'atom'\n\n// https://github.com/atom/atom-select-list/pull/31\nlet SelectListView: any\ntype ToggleAction = 'enable' | 'disable'\n\nexport default class ToggleView {\n  private action: ToggleAction\n  private emitter: Emitter = new Emitter()\n  private providers: Array<string>\n  private subscriptions: CompositeDisposable = new CompositeDisposable()\n  private disabledProviders: Array<string> = []\n\n  constructor(action: ToggleAction, providers: Array<string>) {\n    this.action = action\n    this.providers = providers\n\n    this.subscriptions.add(\n      this.emitter,\n      atom.config.observe('linter.disabledProviders', disabledProviders => {\n        this.disabledProviders = disabledProviders\n      }),\n    )\n  }\n  getItems(): Array<string> {\n    if (this.action === 'disable') {\n      return this.providers.filter(name => !this.disabledProviders.includes(name))\n    }\n    return this.disabledProviders\n  }\n  process(name: string): void {\n    if (this.action === 'disable') {\n      this.disabledProviders.push(name)\n      this.emitter.emit('did-disable', name)\n    } else {\n      const index = this.disabledProviders.indexOf(name)\n      if (index !== -1) {\n        this.disabledProviders.splice(index, 1)\n      }\n    }\n    atom.config.set('linter.disabledProviders', this.disabledProviders)\n  }\n  show() {\n    if (!SelectListView) {\n      SelectListView = require('atom-select-list')\n    }\n    const selectListView = new SelectListView({\n      items: this.getItems(),\n      emptyMessage: 'No matches found',\n      elementForItem: (item: any) => {\n        const li = document.createElement('li')\n        li.textContent = item\n        return li\n      },\n      didConfirmSelection: (item: any) => {\n        try {\n          this.process(item)\n          this.dispose()\n        } catch (e) {\n          console.error('[Linter] Unable to process toggle:', e)\n        }\n      },\n      didCancelSelection: () => {\n        this.dispose()\n      },\n      didConfirmEmptySelection: () => {\n        this.dispose()\n      },\n    })\n    const panel = atom.workspace.addModalPanel({ item: selectListView })\n\n    selectListView.focus()\n    this.subscriptions.add(\n      new Disposable(function () {\n        panel.destroy()\n      }),\n    )\n  }\n\n  /* eslint-disable @typescript-eslint/no-explicit-any */\n  onDidDispose(callback: () => any): Disposable {\n    return this.emitter.on('did-dispose', callback)\n  }\n  onDidDisable(callback: (name: string) => any): Disposable {\n    return this.emitter.on('did-disable', callback)\n  }\n  /* eslint-enable @typescript-eslint/no-explicit-any */\n\n  dispose() {\n    this.emitter.emit('did-dispose')\n    this.subscriptions.dispose()\n  }\n}\n","import { CompositeDisposable, Disposable } from 'atom'\n\nimport Linter from './main'\nimport type { UI, Linter as LinterProvider, Indie } from './types'\n\n// Internal variables\nlet instance: Linter\nlet subscriptions: CompositeDisposable\n\nexport function activate() {\n  subscriptions = new CompositeDisposable()\n\n  instance = new Linter()\n  subscriptions.add(\n    instance,\n    atom.packages.onDidActivateInitialPackages(function () {\n      if (!atom.inSpecMode()) {\n        require('atom-package-deps').install('linter', true)\n      }\n    }),\n  )\n}\nexport function consumeLinter(linter: LinterProvider | Array<LinterProvider>): Disposable {\n  const linters = Array.isArray(linter) ? linter : [linter]\n\n  for (const entry of linters) {\n    instance.addLinter(entry)\n  }\n  return new Disposable(() => {\n    for (const entry of linters) {\n      instance.deleteLinter(entry)\n    }\n  })\n}\nexport function consumeUI(ui: UI | Array<UI>): Disposable {\n  const uis = Array.isArray(ui) ? ui : [ui]\n\n  for (const entry of uis) {\n    instance.addUI(entry)\n  }\n  return new Disposable(() => {\n    for (const entry of uis) {\n      instance.deleteUI(entry)\n    }\n  })\n}\nexport function provideIndie() {\n  return (indie: Indie) => instance.addIndie(indie)\n}\nexport function deactivate() {\n  subscriptions.dispose()\n}\n","import arrayUnique from 'lodash/uniq'\nimport { CompositeDisposable } from 'atom'\n\nimport UIRegistry from './ui-registry'\nimport IndieRegistry from './indie-registry'\nimport MessageRegistry from './message-registry'\nimport LinterRegistry from './linter-registry'\nimport EditorsRegistry from './editor-registry'\nimport { Commands, showDebug } from './commands'\nimport ToggleView from './toggle-view'\nimport type { UI, Linter as LinterProvider, Indie } from './types'\n\nclass Linter {\n  private commands: Commands = new Commands()\n  private registryUI?: UIRegistry\n  private registryIndie?: IndieRegistry\n  private registryEditors?: EditorsRegistry\n  private registryLinters?: LinterRegistry\n  private registryMessages?: MessageRegistry\n  private subscriptions: CompositeDisposable = new CompositeDisposable()\n  private idleCallbacks: Set<number> = new Set()\n\n  constructor() {\n    this.subscriptions.add(this.commands)\n\n    this.commands.onShouldLint(() => {\n      this.registryEditorsInit()\n      const textEditor = atom.workspace.getActiveTextEditor()\n      if (textEditor === undefined) {\n        return\n      }\n      // this.registryEditors becomes valid inside registryEditorsInit\n      const editorLinter = this.registryEditors!.get(textEditor)\n      if (editorLinter) {\n        editorLinter.lint()\n      }\n    })\n    this.commands.onShouldToggleActiveEditor(() => {\n      const textEditor = atom.workspace.getActiveTextEditor()\n      if (textEditor === undefined) {\n        return\n      }\n      this.registryEditorsInit()\n      // this.registryEditors becomes valid inside registryEditorsInit\n      const editor = this.registryEditors!.get(textEditor)\n      if (editor) {\n        editor.dispose()\n      } else if (textEditor) {\n        // this.registryEditors becomes valid inside registryEditorsInit\n        this.registryEditors!.createFromTextEditor(textEditor)\n      }\n    })\n    this.commands.onShouldDebug(async () => {\n      this.registryUIInit()\n      this.registryIndieInit()\n      this.registryLintersInit()\n      await showDebug(\n        // this.registryLinters becomes valid inside registryLintersInit\n        this.registryLinters!.getProviders(),\n        // this.registryIndie becomes valid inside registryIndieInit\n        this.registryIndie!.getProviders(),\n        // this.registryUI becomes valid inside registryUIInit\n        this.registryUI!.getProviders(),\n      )\n    })\n    this.commands.onShouldToggleLinter(action => {\n      this.registryLintersInit()\n      // this.registryLinters becomes valid inside registryLintersInit\n      const toggleView = new ToggleView(action, arrayUnique(this.registryLinters!.getProviders().map(linter => linter.name)))\n      toggleView.onDidDispose(() => {\n        this.subscriptions.remove(toggleView)\n      })\n      toggleView.onDidDisable(name => {\n        // this.registryLinters becomes valid inside registryLintersInit\n        const linter = this.registryLinters!.getProviders().find(entry => entry.name === name)\n        if (linter) {\n          this.registryMessagesInit()\n          // this.registryMessages becomes valid inside registryMessagesInit\n          this.registryMessages!.deleteByLinter(linter)\n        }\n      })\n      toggleView.show()\n      this.subscriptions.add(toggleView)\n    })\n\n    const projectPathChangeCallbackID = window.requestIdleCallback(\n      /* projectPathChange */ () => {\n        this.idleCallbacks.delete(projectPathChangeCallbackID)\n        // NOTE: Atom triggers this on boot so wait a while\n        this.subscriptions.add(\n          atom.project.onDidChangePaths(() => {\n            this.commands.lint()\n          }),\n        )\n      },\n    )\n    this.idleCallbacks.add(projectPathChangeCallbackID)\n\n    const registryEditorsInitCallbackID = window.requestIdleCallback(\n      /* registryEditorsIdleInit */ () => {\n        this.idleCallbacks.delete(registryEditorsInitCallbackID)\n        // This will be called on the fly if needed, but needs to run on it's\n        // own at some point or linting on open or on change will never trigger\n        this.registryEditorsInit()\n      },\n    )\n    this.idleCallbacks.add(registryEditorsInitCallbackID)\n  }\n  dispose() {\n    this.idleCallbacks.forEach(callbackID => window.cancelIdleCallback(callbackID))\n    this.idleCallbacks.clear()\n    this.subscriptions.dispose()\n  }\n\n  registryEditorsInit() {\n    if (this.registryEditors !== undefined) {\n      return\n    }\n    this.registryEditors = new EditorsRegistry()\n    this.subscriptions.add(this.registryEditors)\n    this.registryEditors.observe(editorLinter => {\n      editorLinter.onShouldLint(onChange => {\n        this.registryLintersInit()\n        // this.registryLinters becomes valid inside registryLintersInit\n        this.registryLinters!.lint({ onChange, editor: editorLinter.getEditor() })\n      })\n      editorLinter.onDidDestroy(() => {\n        this.registryMessagesInit()\n        if (!this.registryEditors!.hasSibling(editorLinter)) {\n          // this.registryMessages becomes valid inside registryMessagesInit\n          this.registryMessages!.deleteByBuffer(editorLinter.getEditor().getBuffer())\n        }\n      })\n    })\n    this.registryEditors.activate()\n  }\n  registryLintersInit() {\n    if (this.registryLinters !== undefined) {\n      return\n    }\n    this.registryLinters = new LinterRegistry()\n    this.subscriptions.add(this.registryLinters)\n    this.registryLinters.onDidUpdateMessages(({ linter, messages, buffer }) => {\n      this.registryMessagesInit()\n      // this.registryMessages becomes valid inside registryMessagesInit\n      this.registryMessages!.set({ linter, messages, buffer })\n    })\n    this.registryLinters.onDidBeginLinting(({ linter, filePath }) => {\n      this.registryUIInit()\n      // this.registryUI becomes valid inside registryUIInit\n      this.registryUI!.didBeginLinting(linter, filePath)\n    })\n    this.registryLinters.onDidFinishLinting(({ linter, filePath }) => {\n      this.registryUIInit()\n      // this.registryUI becomes valid inside registryUIInit\n      this.registryUI!.didFinishLinting(linter, filePath)\n    })\n  }\n  registryIndieInit() {\n    if (this.registryIndie !== undefined) {\n      return\n    }\n    this.registryIndie = new IndieRegistry()\n    this.subscriptions.add(this.registryIndie)\n    this.registryIndie.observe(indieLinter => {\n      indieLinter.onDidDestroy(() => {\n        this.registryMessagesInit()\n        // this.registryMessages becomes valid inside registryMessagesInit\n        this.registryMessages!.deleteByLinter(indieLinter)\n      })\n    })\n    this.registryIndie.onDidUpdate(({ linter, messages }) => {\n      this.registryMessagesInit()\n      // this.registryMessages becomes valid inside registryMessagesInit\n      this.registryMessages!.set({ linter, messages, buffer: null })\n    })\n  }\n  registryMessagesInit() {\n    if (this.registryMessages) {\n      return\n    }\n    this.registryMessages = new MessageRegistry()\n    this.subscriptions.add(this.registryMessages)\n    this.registryMessages.onDidUpdateMessages(difference => {\n      this.registryUIInit()\n      // this.registryUI becomes valid inside registryUIInit\n      this.registryUI!.render(difference)\n    })\n  }\n  registryUIInit() {\n    if (this.registryUI !== undefined) {\n      return\n    }\n    this.registryUI = new UIRegistry()\n    this.subscriptions.add(this.registryUI)\n  }\n\n  // API methods for providing/consuming services\n  // UI\n  addUI(ui: UI) {\n    this.registryUIInit()\n    // this.registryUI becomes valid inside registryUIInit\n    this.registryUI!.add(ui)\n    this.registryMessagesInit()\n    // this.registryMessages becomes valid inside registryMessagesInit\n    const messages = this.registryMessages!.messages\n    if (messages.length) {\n      ui.render({ added: messages, messages, removed: [] })\n    }\n  }\n  deleteUI(ui: UI) {\n    this.registryUIInit()\n    // this.registryUI becomes valid inside registryUIInit\n    this.registryUI!.delete(ui)\n  }\n  // Standard Linter\n  addLinter(linter: LinterProvider) {\n    this.registryLintersInit()\n    // this.registryLinters becomes valid inside registryLintersInit\n    this.registryLinters!.addLinter(linter)\n  }\n  deleteLinter(linter: LinterProvider) {\n    this.registryLintersInit()\n    // this.registryLinters becomes valid inside registryLintersInit\n    this.registryLinters!.deleteLinter(linter)\n    this.registryMessagesInit()\n    // this.registryMessages becomes valid inside registryMessagesInit\n    this.registryMessages!.deleteByLinter(linter)\n  }\n  // Indie Linter\n  addIndie(indie: Indie) {\n    this.registryIndieInit()\n    // this.registryIndie becomes valid inside registryIndieInit\n    return this.registryIndie!.register(indie, 2)\n  }\n}\n\nexport default Linter\n"],"names":["freeGlobal","global","Object","freeSelf","self","_root","Function","_Symbol","require$$0","Symbol","objectProto","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","undefined","_getRawTag","value","isOwn","call","tag","unmasked","e","result","getRawTag","require$$1","objectToString","_baseGetTag","isObject_1","type","baseGetTag","isObject","uid","isFunction_1","coreJsData","maskSrcKey","exec","keys","IE_PROTO","_isMasked","func","funcToString","isFunction","isMasked","require$$2","toSource","reIsHostCtor","funcProto","reIsNative","RegExp","replace","baseIsNative","test","getValue","object","key","_getNative","_nativeCreate","nativeCreate","_hashClear","this","__data__","size","_hashDelete","has","_hashGet","data","hashClear","hashDelete","hashGet","hashHas","hashSet","Hash","entries","index","length","clear","entry","set","get","_Hash","_listCacheClear","eq","other","_assocIndexOf","array","assocIndexOf","splice","Array","listCacheClear","listCacheDelete","pop","listCacheGet","listCacheHas","listCacheSet","push","ListCache","_ListCache","Map","isKeyable","_getMapData","map","getMapData","mapCacheClear","hash","string","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","setCacheAdd","setCacheHas","SetCache","values","add","_SetCache","baseFindIndex","predicate","fromIndex","fromRight","baseIsNaN","strictIndexOf","baseIndexOf","_arrayIncludes","_arrayIncludesWith","comparator","_cacheHas","cache","_setToArray","forEach","Set","noop","createSet","arrayIncludes","arrayIncludesWith","cacheHas","require$$3","setToArray","require$$5","baseUniq","iteratee","includes","isCommon","seen","outer","computed","seenIndex","uniq_1","showError","title","description","points","renderedPoints","item","atom","notifications","addWarning","dismissable","detail","join","VALID_SEVERITY","validateMessages","linterName","messages","isArray","invalidURL","invalidIcon","invalidExcerpt","invalidLocation","invalidSeverity","invalidSolution","invalidReference","invalidDescription","invalidLinterName","i","message","reference","icon","location","file","position","range","Range","fromObject","Number","isNaN","start","row","column","end","solutions","Promise","Point","excerpt","severity","url","UIRegistry","constructor","providers","subscriptions","CompositeDisposable","ui","name","didBeginLinting","didFinishLinting","render","dispose","validateUI","delete","provider","getProviders","from","linter","filePath","$activated","$requestLatest","$requestLastReceived","shouldTriggerLinter","wasTriggeredOnChange","scopes","lintsOnChange","some","scope","grammarScopes","getEditorCursorScopes","textEditor","arrayUnique","getCursors","reduce","cursor","concat","getScopeDescriptor","getScopesArray","minimatch","async","isPathIgnored","ignoredGlob","ignoredVCS","directory","Directory","repository","project","repositoryForDirectory","normalizedFilePath","process","platform","require","updateMessageKey","normalizeMessages","getRangeClass","getPointClass","j","_length","solution","version","point","flagMessages","inputs","oldMessages","oldKept","oldRemoved","newAdded","keyMessageMap","createKeyMessageMap","iInput","len","input","cacheKeys","oldKeptKeys","oldRemovedKeys","filter","x","iRemoved","RemovedKeysLen","mergeArray","arr1","arr2","apply","IndieDelegate","indie","emitter","Emitter","getMessages","out","m","clearMessages","disposed","emit","setMessages","Error","Validate.messages","console","debug","setAllMessages","inDevMode","fileMessages","onDidUpdate","callback","on","onDidDestroy","IndieRegistry","delegates","register","config","validateIndie","indieLinter","observe","root","reWhitespace","trimmedEndIndex","charAt","reTrimStart","isObjectLike","baseTrim","slice","isSymbol","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","now","Date","toNumber","valueOf","isBinary","nativeMax","Math","max","nativeMin","min","debounce_1","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","timeWaiting","remainingWait","debounced","isInvoking","arguments","leadingEdge","clearTimeout","cancel","flush","MessageRegistry","messagesMap","debouncedUpdate","debounce","update","buffer","found","changed","deleted","added","removed","flaggedMessages","allThisEntry","onDidUpdateMessages","deleteByBuffer","deleteByLinter","LinterRegistry","linters","lintOnChange","ignoreVCS","ignoreGlob","lintPreviewTabs","disabledProviders","activeNotifications","warn","hasLinter","addLinter","lint","Validate.linter","deleteLinter","onChange","editor","getPath","workspace","getActivePane","getPendingItem","Helpers.isPathIgnored","Helpers.getEditorCursorScopes","promises","Helpers.shouldTriggerLinter","number","statusBuffer","getBuffer","statusFilePath","resolve","then","isAlive","validity","Helpers.normalizeMessages","error","notificationMessage","getOptions","notification","addError","buttons","text","onDidClick","openDevTools","dismiss","all","onDidBeginLinting","onDidFinishLinting","EditorLinter","isTextEditor","editorBuffer","debouncedLint","onDidSave","onDidReload","subscriptiveObserve","interval","onDidChange","getEditor","onShouldLint","eventName","subscription","eventSubscription","props","Disposable","EditorRegistry","lintOnOpen","editorLinters","activate","observeTextEditors","createFromTextEditor","editorLinter","hasSibling","manifest","SelectListView","instance","formatItem","itemName","sortByName","item1","item2","localeCompare","Commands","commands","enableLinter","disableLinter","toggleActiveEditor","onShouldDebug","onShouldToggleActiveEditor","onShouldToggleLinter","ToggleView","action","getItems","indexOf","show","selectListView","items","emptyMessage","elementForItem","li","document","createElement","textContent","didConfirmSelection","didCancelSelection","didConfirmEmptySelection","panel","addModalPanel","focus","destroy","onDidDispose","onDidDisable","Linter","idleCallbacks","registryEditorsInit","getActiveTextEditor","registryEditors","registryUIInit","registryIndieInit","registryLintersInit","standardLinters","indieLinters","uiProviders","textEditorScopes","sortedLinters","sort","sortedIndieLinters","sortedUIProviders","indieLinterNames","standardLinterNames","matchingStandardLinters","humanizedScopes","uiProviderNames","ignoreVCSIgnoredPaths","disabledLinters","filePathIgnored","addInfo","getVersion","showDebug","registryLinters","registryIndie","registryUI","toggleView","remove","find","registryMessagesInit","registryMessages","projectPathChangeCallbackID","window","requestIdleCallback","onDidChangePaths","registryEditorsInitCallbackID","callbackID","cancelIdleCallback","EditorsRegistry","difference","addUI","deleteUI","addIndie","packages","onDidActivateInitialPackages","inSpecMode","install","uis"],"mappings":"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"}